var COMM=window.COMM||{};COMM={init:function(){var e=this;e.navHover(),e.navliHover(),e.honorSlide(),e.organSlide(),e.countDown(3)},navHover:function(){var e=0,n=$(".header .barwp .nav-bar"),a=$(".header-inner"),i=$(".header .nav li"),t=i.index(i.filter(".current"));i.mouseenter(function(){e=i.index($(this)),i.removeClass("current").eq(e).addClass("current"),0===e||4===e?n.removeClass("cur"):n.removeClass("cur").eq(e-1).addClass("cur")}),a.mouseleave(function(){i.removeClass("current").eq(t).addClass("current"),n.removeClass("cur")})},navliHover:function(){var e=$(".nav li"),n=$(".nav li.current").index();$(".new-header li").hover(function(){if($(this).parents().hasClass("nav")){var n=$(this).index();e.removeClass("current").eq(n).addClass("current");var a=$(".sub-"+n).data("height");$(".new-sub-nav>li").stop().animate({height:"0px"}),$(".sub-"+n).stop().animate({height:a+"px"})}}),$(".wrap-new-header").mouseleave(function(){var a=e.removeClass("current");n>=0&&a.eq(n).addClass("current"),$(".new-sub-nav>li").stop().animate({height:"0px"})})},honorSlide:function(){var e=this,n=$(".honor-wrap .box").find(".clickEle"),a=$(".honor-wrap .list ul"),i=a.find("li").outerWidth(),t=a.find("li").length;$(".main-honor").parent("body").css("min-width","1130px"),e.gotoclick(n,a,t,i)},gotoclick:function(e,n,a,i){var t=Math.ceil(a/3-1),l=!0,s=!1,o=!0,r=parseInt(3*i);index=0,inDex=0,$prev=$(".prev"),$next=$(".next"),e.click(function(){l=$(this).hasClass("next")?!0:!1,o=o===!0?!0:!1,l&&o?(t>index?index++:index=0,index===t?(o=!1,$next.addClass("no_click")):o=!0,s=!0,$prev.removeClass("no_click")):l===!1&&s===!0&&(index>0?index--:index=t,0===index?(s=!1,$prev.addClass("no_click")):s=!0,o=!0,$next.removeClass("no_click")),inDex!==index&&(inDex=index,n.stop(!0,!1).animate({left:-r*inDex},350))})},organSlide:function(){var e=$(".slide-box"),n=$(".home .slide-box li"),a=0;n.hover(function(i){$(i.currentTarget).hasClass("cur")||(a=n.index($(i.currentTarget)),n.removeClass("cur").eq(a).addClass("cur"),e.removeClass("sl0 sl1 sl2 sl3").addClass("sl"+a))})},loadmore:{Lock:!0,dataCache:[],page:2,init:function(e){var n=this,a=$(".add-more"),i=e||"";a.length>=1&&"object"==typeof i&&i.url&&n.even(i)},even:function(e){var n=this,a=$(".add-more"),i=a.prev(),t=e.url,l=(n.Lock,5);a.click(i,function(){"object"==typeof e&&e.url&&(n.Lock=!1,n.getData(i,t,l,n.page))})},getData:function(e,n,a,i){var t=this,l={length:a,page:i},s=n;$.ajax({url:s,type:"get",data:l,dataType:"json",success:function(n){"undefined"!=typeof n&&200===n.Code&&(t.dataCache=n.Data,t.renderHtml(e,t.dataCache),t.page++)},error:function(){alert("网络错误，请重新刷新页面！"),t.page--}})},renderHtml:function(e,n){var a=this,i=n,t=i.length,l=e,s=!1,o="";if(s=l.hasClass("layout-box")?!0:!1,t>0){if(s===!0)for(var r=0;t>r;r++)o+='<li>                                    <div class="f-left layout-img">                                        <img src="'+i[r].imageSrc+'" alt=""/>                                    </div>                                    <div class="f-left layout-text">                                        <p class="time"><i class="point"></i>'+i[r].time+'</p>                                        <p class="title"><a href="'+i[r].linkUrl+'">'+i[r].title+'</a></p>                                        <p class="context">'+i[r].detail+'</p>                                     </div>                                     <div class="clear"></div>                                  </li>';else for(var c=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],r=0;t>r;r++)o+='<li>                                <div class="data">                                    <p class="day">'+i[r].day+'</p>                                    <p class="month">'+c[i[r].month-1]+'</p>                                    <p class="year">'+i[r].year+'</p>                                </div>                                <a href="'+i[r].linkUrl+'" class="inner">                                    <p class="file-name">'+i[r].title+'</p>                                    <p class="file-text"></p>                                </a>',""!==i[r].filepath&&null!=i[r].filepath&&"null"!==i[r].filepath&&(o+='<div class="download">                                    <a href="'+i[r].filepath+'">                                        <i class="icon-yun"></i>                                        <p>PDF</p>                                    </a>                                </div>'),o+="</li>";l.append(o),a.toscrllop()}else 0>=t&&(alert("没有更多了哦！"),a.page--);a.Lock=!0},toscrllop:function(){scrollHeight=$(document).height(),scrollTop=$(document).scrollTop(),windowHeight=$(window).height(),scrltop=scrollHeight-windowHeight,$("html,body").stop().animate({scrollTop:scrltop},500)}},countDown:function(e){var n=null,a=$(".notfind").length;1>a||(clearInterval(n),n=setInterval(function(){e--,$(".notfind .wrap p span").html(e),0===e&&(clearInterval(n),window.history.go(-1))},1e3))}},$(function(){var e=window.location.host;"www.ucsmy.com"!==e&&"test.ucsmy.com"!==e&&(window.location.href="http://www.ucsmy.com"),COMM.init(),function(){function e(){o=$(this),o.hasClass("cur")||s.find("a").css({color:"#999"}),0==o.index()?a(o.width(),o.position().left):a(o.width(),o.position().left+r)}function n(){s.find("a").css({color:""}),a(c,d)}function a(e,n){l.stop().animate({width:e,left:n},300)}var i=$(".sub-nav .wrap");if(i.length){i.find(".abs").length||i.append('<p class="abs"></p>');var t=i.find("li"),l=i.find(".abs"),s=i.find(".cur"),o=null,r=16,c=s.width(),d=s.position().left+r;0==s.index()&&(d=s.position().left),l.css({width:c,left:d,display:"block"}).fadeIn(300),t.hover(e,n)}}()});